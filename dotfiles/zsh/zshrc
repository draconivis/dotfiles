# basic zsh conf
export ZSH_HOME=$HOME/.config/zsh
export HISTFILE=$HOME/.history
export HISTSIZE=1000
export SAVEHIST=1000
export EDITOR=nvim
setopt sharehistory

# load aliases & functions
source ${ZSH_HOME}/aliases.zsh
source ${ZSH_HOME}/functions.zsh

# gpg-agent config (yubikey as ssh key)
# export GPG_TTY="$(tty)"
# export SSH_AUTH_SOCK=$(gpgconf --list-dirs agent-ssh-socket)
# gpgconf --launch gpg-agent

# pre plugin load configs
export NVM_LAZY_LOAD=true
# export NVM_AUTO_USE=true # automatically run `nvm use` when entering a dir with a nvmrc. doesn't work with lazy loading

# load plugins with antidote
# source '/usr/share/zsh-antidote/antidote.zsh' # antidote installed from AUR
# source ~/.nix-profile/share/antidote/antidote.zsh # antidote installed from NIX
source $HOMEBREW_PREFIX/opt/antidote/share/antidote/antidote.zsh # antidote installed with brew
antidote load ${ZSH_HOME}/zsh_plugins.txt

# post plugin load configs
bindkey '^[[A' history-substring-search-up
bindkey '^[[B' history-substring-search-down

# load more stuff
## load oh-my-posh
eval "$(oh-my-posh init zsh --config $ZSH_HOME/omp.toml)"

## direnv
export DIRENV_LOG_FORMAT=''
eval "$(direnv hook zsh)"

## zoxide (better zsh-z)
eval "$(zoxide init --cmd cd zsh)"

# autocompletion
autoload -U compinit; compinit

if [ -e /home/patrick/.nix-profile/etc/profile.d/nix.sh ]; then . /home/patrick/.nix-profile/etc/profile.d/nix.sh; fi # added by Nix installer
